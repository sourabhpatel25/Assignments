<%@ page import="java.util.List" %>
<%@ page import="com.info.farmer.dao.ProductDAO" %>
<%@ page import="com.info.farmer.entity.Product" %>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Farmer Dashboard</title>

<style>
    body { background-color:#f5f5f5; }

    .sidebar{
        width:240px;
        height:100vh;
        background:#2d6a4f;
        padding:20px;
        position:fixed;
        color:white;
    }

    .sidebar h2{
        font-size:26px;
        margin-bottom:30px;
    }

    .sidebar a{
        color:white;
        text-decoration:none;
        display:block;
        margin:12px 0;
        font-size:18px;
    }

    .main-content{
        margin-left:260px;
        padding:20px;
    }

    .card-box{
        border-radius:12px;
        padding:20px;
        color:white;
        background:#2d6a4f;
    }

    .add-btn{
        background:#1b4332;
        color:white;
        border:none;
    }
</style>
</head>
<%@include file="__bootstrap_link.jsp" %>
<body>

<!-- Main Content -->
<div class="main-content">

<h2 class="mb-4">Dashboard Overview</h2>

<!-- Cards -->
<div class="row mb-4">

    <div class="col-md-4">
        <div class="card-box">
            <h3>12</h3>
            <p>Total Products</p>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card-box" style="background:#40916c">
            <h3>45</h3>
            <p>Total Orders</p>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card-box" style="background:#1b4332">
            <h3>₹18,450</h3>
            <p>Total Earnings</p>
        </div>
    </div>

</div>

<!-- Add Button -->
<div class="d-flex justify-content-between mb-3">
    <h3>My Products</h3>
    <a href="add_product_form.jsp">
        <button class="btn add-btn">+ Add New Product</button>
    </a>
</div>


<%
    
    List<Product> products = ProductDAO.fetchAll();
%>

<!-- Products Table -->
<table class="table table-striped table-bordered">

<thead class="table-success">
<tr>
    <th>Product Name</th>
    <th>Price (₹)</th>
    <th>Stock</th>
   
    <th>Action</th>
</tr>
</thead>

<tbody>

<%
    if(products != null && !products.isEmpty()){
        for(Product p : products){
%>

<tr>
    <td><%= p.getName() %></td>
    <td><%= p.getPrice() %></td>
    <td><%= p.getQuantity() %></td>
    

    <td>
        <a href="edit_product.jsp?id=<%= p.getId() %>" class="btn btn-sm btn-primary">Edit</a>

        <a href="controller/delete_product.jsp?id=<%= p.getId() %>"
           onclick="return confirm('Are you sure?');"
           class="btn btn-sm btn-danger">
           Delete
        </a>
    </td>
</tr>

<%
        }
    } else {
%>

<tr>
    <td colspan="5" class="text-center text-danger">
        No Products Found
    </td>
</tr>

<%
    }
%>

</tbody>
</table>

</div>

</body>
</html>
